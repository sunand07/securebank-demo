import "tfrun"
import "decimal"

threshold = decimal.new(20.00)

main = rule {
  # If no cost estimate, allow the run (to avoid hard fail)
  tfrun.cost_estimate is null or within_threshold
}

within_threshold = rule {
  proposed = decimal.new(tfrun.cost_estimate.proposed_monthly_cost)

  print("Proposed monthly cost is: $", proposed, " | Threshold: $", threshold)

  proposed <= threshold
}
